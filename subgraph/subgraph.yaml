specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  # ========================================
  # IP Asset Registry Contract
  # ========================================
  - kind: ethereum
    name: IPAssetRegistry
    network: mainnet # Update with actual network (story-testnet, etc.)
    source:
      address: "0x0000000000000000000000000000000000000000" # Update with deployed address
      abi: IPAssetRegistry
      startBlock: 0 # Update with deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - IPAsset
        - License
        - IPUsageEvent
      abis:
        - name: IPAssetRegistry
          file: ./abis/IPAssetRegistry.json
      eventHandlers:
        - event: IPAssetRegistered(indexed address,string,string,string)
          handler: handleIPAssetRegistered
        - event: LicenseGranted(indexed bytes32,indexed address,uint256)
          handler: handleLicenseGranted
        - event: IPUsed(indexed bytes32,indexed address,string)
          handler: handleIPUsed
      file: ./src/mapping.ts

  # ========================================
  # ADLV (Liquidity Vault) Contract
  # ========================================
  - kind: ethereum
    name: LiquidityVault
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Update with deployed address
      abi: LiquidityVault
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LiquidityVault
        - Loan
        - Deposit
      abis:
        - name: LiquidityVault
          file: ./abis/LiquidityVault.json
      eventHandlers:
        - event: Deposited(indexed address,uint256,uint256)
          handler: handleDeposited
        - event: LoanRequested(indexed address,uint256,uint256,uint256)
          handler: handleLoanRequested
        - event: LoanRepaid(indexed address,uint256,uint256)
          handler: handleLoanRepaid
        - event: LoanDefaulted(indexed address,uint256)
          handler: handleLoanDefaulted
      file: ./src/mapping.ts

  # ========================================
  # IDO Contract
  # ========================================
  - kind: ethereum
    name: IDOContract
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Update with deployed address
      abi: IDOContract
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - IDOPool
        - IDOParticipation
      abis:
        - name: IDOContract
          file: ./abis/IDOContract.json
      eventHandlers:
        - event: PoolCreated(indexed bytes32,address,uint256,uint256,uint256)
          handler: handlePoolCreated
        - event: Participated(indexed bytes32,indexed address,uint256)
          handler: handleParticipated
        - event: TokensClaimed(indexed bytes32,indexed address,uint256)
          handler: handleTokensClaimed
      file: ./src/mapping.ts

  # ========================================
  # Bridge Contract
  # ========================================
  - kind: ethereum
    name: BridgeContract
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Update with deployed address
      abi: BridgeContract
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - BridgeTransaction
      abis:
        - name: BridgeContract
          file: ./abis/BridgeContract.json
      eventHandlers:
        - event: BridgeInitiated(indexed bytes32,uint256,uint256,address,address,uint256)
          handler: handleBridgeInitiated
        - event: BridgeCompleted(indexed bytes32)
          handler: handleBridgeCompleted
      file: ./src/mapping.ts

  # ========================================
  # World ID Verifier Contract
  # ========================================
  - kind: ethereum
    name: WorldIDVerifier
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Update with deployed address
      abi: WorldIDVerifier
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - WorldIDVerification
      abis:
        - name: WorldIDVerifier
          file: ./abis/WorldIDVerifier.json
      eventHandlers:
        - event: Verified(indexed address,string,string)
          handler: handleVerified
      file: ./src/mapping.ts

